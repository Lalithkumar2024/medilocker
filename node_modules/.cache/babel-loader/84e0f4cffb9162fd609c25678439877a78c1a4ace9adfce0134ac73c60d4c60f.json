{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Swal from\"sweetalert2\";import{emergencyLogin}from\"../api/UserService\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmergencyLogin=()=>{const[name,setName]=useState('');const[dob,setDob]=useState('');// const [role,setRole] = useState('Patient');\nconst role=\"Patient\";const navigate=useNavigate();async function handleLogin(e){e.preventDefault();if(!name.trim()){Swal.fire(\"Error\",\"Name cannot be empty\",\"error\");return;}if(!dob){Swal.fire(\"Error\",\"Date of birth cannot be empty\",\"error\");return;}const user={name:name,dateOfBirth:dob,role:role};console.log(user);try{const response=await emergencyLogin(user);console.log(\"logged-in user : \",response.data);localStorage.setItem(\"isLoggedIn\",\"true\");localStorage.setItem(\"userRole\",role);localStorage.setItem(\"users\",JSON.stringify(response.data));Swal.fire(\"Success\",\"Login Successful!\",\"success\").then(()=>{navigate(\"/dashboard\");});}catch(error){Swal.fire(\"Error\",\"Invalid name or dob.\",\"error\");}}return/*#__PURE__*/_jsx(\"div\",{className:\"emergencylogin card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title p-2\",children:\"Emergency Login\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"#\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"floatingInput\",name:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"Enter your Name\",required:true,autoComplete:\"off\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"label\",{for:\"floatingInput\",children:\"Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",id:\"floatingDate\",name:\"dob\",value:dob,onChange:e=>setDob(e.target.value),placeholder:\"Enter your Date of Birth\",required:true,autoComplete:\"off\",className:\"form-control\"}),/*#__PURE__*/_jsx(\"label\",{for:\"floatingDate\",children:\"Date of Birth\"})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-12 mt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success w-100\",onClick:handleLogin,children:\"Login\"})})]})]})});};export default EmergencyLogin;","map":{"version":3,"names":["React","useState","useNavigate","Swal","emergencyLogin","jsx","_jsx","jsxs","_jsxs","EmergencyLogin","name","setName","dob","setDob","role","navigate","handleLogin","e","preventDefault","trim","fire","user","dateOfBirth","console","log","response","data","localStorage","setItem","JSON","stringify","then","error","className","children","action","type","id","value","onChange","target","placeholder","required","autoComplete","for","class","onClick"],"sources":["D:/Kumaran project/medilocker/src/components/EmergencyLogin.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport { emergencyLogin } from \"../api/UserService\";\r\n\r\nconst EmergencyLogin = ()=>{\r\n    const [name,setName] = useState('');\r\n    const [dob,setDob] = useState('');\r\n    // const [role,setRole] = useState('Patient');\r\n    const role = \"Patient\";\r\n    const navigate = useNavigate();\r\n\r\n    async function handleLogin(e){\r\n        e.preventDefault();\r\n\r\n        if (!name.trim()) {\r\n            Swal.fire(\"Error\", \"Name cannot be empty\", \"error\");\r\n            return;\r\n        }\r\n        if (!dob) {\r\n            Swal.fire(\"Error\", \"Date of birth cannot be empty\", \"error\");\r\n            return;\r\n        }\r\n\r\n        const user = {\r\n            name: name,\r\n            dateOfBirth: dob,\r\n            role: role\r\n        }\r\n\r\n        console.log(user);\r\n        try {\r\n            const response = await emergencyLogin(user);\r\n            console.log(\"logged-in user : \",response.data);\r\n            localStorage.setItem(\"isLoggedIn\", \"true\");\r\n            localStorage.setItem(\"userRole\", role);\r\n            localStorage.setItem(\"users\", JSON.stringify(response.data));\r\n\r\n\r\n            Swal.fire(\"Success\", \"Login Successful!\", \"success\").then(() => {\r\n            navigate(\"/dashboard\");\r\n            });\r\n          } catch(error) {\r\n            Swal.fire(\"Error\", \"Invalid name or dob.\", \"error\");\r\n          }        \r\n    }\r\n\r\n    return(\r\n        <div className=\"emergencylogin card\">\r\n            <div className=\"card-body\">\r\n                <h2 className=\"card-title p-2\">Emergency Login</h2>\r\n                <form action=\"#\">\r\n                    <div className=\"form-floating mb-3\">\r\n                        <input type=\"text\"\r\n                            id=\"floatingInput\"\r\n                            name=\"text\"\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            placeholder=\"Enter your Name\"\r\n                            required\r\n                            autoComplete=\"off\"\r\n                            className=\"form-control\"/>\r\n                        <label for=\"floatingInput\">Name</label>\r\n                    </div>\r\n                    <div className=\"form-floating\">\r\n                        <input type=\"date\" \r\n                            id=\"floatingDate\"\r\n                            name=\"dob\"\r\n                            value={dob}\r\n                            onChange={(e) => setDob(e.target.value)}\r\n                            placeholder=\"Enter your Date of Birth\"\r\n                            required\r\n                            autoComplete=\"off\"\r\n                            className=\"form-control\"  />\r\n                        <label for=\"floatingDate\">Date of Birth</label>\r\n                    </div>\r\n\r\n                    <div class=\"col-12 mt-4\">\r\n                        <button type=\"submit\" className=\"btn btn-success w-100\" onClick={handleLogin}>Login</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EmergencyLogin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}