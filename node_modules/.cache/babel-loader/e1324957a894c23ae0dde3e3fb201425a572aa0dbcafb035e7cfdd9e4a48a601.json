{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Header from\"../components/Header\";import Footer from\"../components/Footer\";import{MapContainer,TileLayer,Marker,Popup}from\"react-leaflet\";import\"leaflet/dist/leaflet.css\";import axios from\"axios\";import L from\"leaflet\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";delete L.Icon.Default.prototype._getIconUrl;L.Icon.Default.mergeOptions({iconRetinaUrl:require(\"leaflet/dist/images/marker-icon-2x.png\"),iconUrl:require(\"leaflet/dist/images/marker-icon.png\"),shadowUrl:require(\"leaflet/dist/images/marker-shadow.png\")});const Pharmacy=()=>{const[location,setLocation]=useState(null);const[pharmacies,setPharmacies]=useState([]);useEffect(()=>{navigator.geolocation.getCurrentPosition(position=>{const{latitude,longitude}=position.coords;setLocation({lat:latitude,lng:longitude});fetchPharmacies(latitude,longitude);},async()=>{try{const res=await axios.get(\"https://ipapi.co/json/\");setLocation({lat:res.data.latitude,lng:res.data.longitude});fetchPharmacies(res.data.latitude,res.data.longitude);}catch(error){console.error(\"Error fetching location from IP:\",error);setLocation({lat:13.0827,lng:80.2707});fetchPharmacies(13.0827,80.2707);}});},[]);const fetchPharmacies=async(lat,lng)=>{try{const response=await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=pharmacy+near+${lat},${lng}`);setPharmacies(response.data);}catch(error){console.error(\"Error fetching pharmacies:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"pharmacy\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"pharmacysection\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Find NearBy Pharmacy's\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:location?/*#__PURE__*/_jsxs(MapContainer,{center:[location.lat,location.lng],zoom:12,style:{height:\"500px\",width:\"100%\",border:\"5px solid\",borderRadius:\"50px\",color:\"#058f5a\"},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Marker,{position:[location.lat,location.lng],children:/*#__PURE__*/_jsx(Popup,{children:\"Your Location\"})}),pharmacies.map((pharmacy,index)=>/*#__PURE__*/_jsx(Marker,{position:[pharmacy.lat,pharmacy.lon],children:/*#__PURE__*/_jsx(Popup,{children:pharmacy.display_name})},index))]}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading map...\"})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Pharmacy;","map":{"version":3,"names":["React","useState","useEffect","Header","Footer","MapContainer","TileLayer","Marker","Popup","axios","L","jsx","_jsx","jsxs","_jsxs","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","Pharmacy","location","setLocation","pharmacies","setPharmacies","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","lat","lng","fetchPharmacies","res","get","data","error","console","response","className","children","center","zoom","style","height","width","border","borderRadius","color","url","map","pharmacy","index","lon","display_name"],"sources":["D:/Kumaran project/medilocker/src/pages/Pharmacy.jsx"],"sourcesContent":["import React,{ useState, useEffect } from \"react\";\r\nimport Header from \"../components/Header\";\r\nimport Footer from \"../components/Footer\";\r\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport axios from \"axios\";\r\nimport L from \"leaflet\";\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require(\"leaflet/dist/images/marker-icon-2x.png\"),\r\n  iconUrl: require(\"leaflet/dist/images/marker-icon.png\"),\r\n  shadowUrl: require(\"leaflet/dist/images/marker-shadow.png\"),\r\n});\r\n\r\nconst Pharmacy = () => {\r\n  const [location, setLocation] = useState(null);\r\n  const [pharmacies, setPharmacies] = useState([]);\r\n  \r\n  useEffect(() => {\r\n    navigator.geolocation.getCurrentPosition(\r\n    (position) => {\r\n      const { latitude, longitude } = position.coords;\r\n      setLocation({ lat: latitude, lng: longitude });\r\n      fetchPharmacies(latitude, longitude);\r\n    },\r\n    async () => {\r\n      try {\r\n        const res = await axios.get(\"https://ipapi.co/json/\");\r\n        setLocation({ lat: res.data.latitude, lng: res.data.longitude });\r\n        fetchPharmacies(res.data.latitude, res.data.longitude);\r\n      } catch (error) {\r\n        console.error(\"Error fetching location from IP:\", error);\r\n        setLocation({ lat: 13.0827, lng: 80.2707 });\r\n        fetchPharmacies(13.0827, 80.2707);\r\n      }\r\n    }\r\n    );\r\n  }, []);\r\n  \r\n  const fetchPharmacies = async (lat, lng) => {\r\n    try {\r\n      const response = await axios.get(`https://nominatim.openstreetmap.org/search?format=json&q=pharmacy+near+${lat},${lng}`);\r\n      setPharmacies(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching pharmacies:\", error);\r\n    }\r\n  };\r\n\r\n  return(\r\n    <div className=\"pharmacy\">\r\n      <Header/>\r\n      <section className=\"pharmacysection\">\r\n\r\n        <h3>Find NearBy Pharmacy's</h3>\r\n        <br />\r\n        <div>\r\n          {location ? (\r\n            <MapContainer center={[location.lat, location.lng]} zoom={12} style={{ height: \"500px\", width: \"100%\" ,border:\"5px solid\",borderRadius:\"50px\",color:\"#058f5a\" }}>\r\n              <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n              <Marker position={[location.lat, location.lng]}>\r\n                <Popup>Your Location</Popup>\r\n              </Marker>\r\n                {pharmacies.map((pharmacy, index) => (\r\n              <Marker key={index} position={[pharmacy.lat, pharmacy.lon]}>\r\n                <Popup>{pharmacy.display_name}</Popup>\r\n              </Marker>\r\n              ))}\r\n            </MapContainer>\r\n            ) : (\r\n              <p>Loading map...</p>\r\n            )}\r\n        </div>\r\n      </section>\r\n      <Footer/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pharmacy;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}